# vim: ft=zsh:ts=4:sw=4

gcl(){
    # Clones a repository and cd into it ( :
    local \
        REPO \
        REPO_BASENAME \
        REPO_NAME

    REPO="$1"
    REPO_BASENAME=$(basename "$REPO")
    REPO_NAME=${REPO_BASENAME%.*}

    # Validate that you only pass one parameter
    if [ $# -gt 1 ]
    then
      echo "Just pass the repo URL as a parameter"
      exit 1
    fi

    git clone "$REPO"
    # cd -P -- "$REPO_NAME" || exit
    cdtmux "$REPO_NAME"
    tmux rename-window "$REPO_NAME"
    exit 0
}

createreactapp(){
    local opt

    while getopts ":i" opt; do
        case $opt in
            i) opt_val="init" ;;
            *) # do default stuff ;;
        esac
    done
    shift $((OPTIND - 1))

    npx create-react-app ${1:?Provide a name for your new react app ;)}
    cd $1

    test -z "$opt_val" && return 0

    tmux split-window -p 20 "npm run start"
    tmux rename-window $1
    $EDITOR ./src/App.js
}
